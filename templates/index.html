<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admission predict - know your chances</title>
    <link rel="icon" type="image/png" href="static/K.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .range-container {
            max-width: 400px;
            margin: auto;
        }

        input[type="range"] {
            width: 30%;
        }

        .select-menu {
            width: 30%;
            text-align: center;
        }

        .navbar {
            background: linear-gradient(45deg, #6a11cb, #2575fc);
            /* Blue & Purple Gradient */
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }

        .navbar-brand {
            font-size: 1.8rem;
            font-weight: bold;
            color: white !important;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg shadow p-3 mb-2 bg-body-tertiary rounded ">
        <div class="container-fluid d-flex justify-content-center">
            <a class="navbar-brand" href="#">Admission Predictor</a>
        </div>
    </nav>

    <!--Description Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">What is Admission predictor?</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Admission predictor is a website which predicts the chances of getting admission in the
                        university of your choice based on various parameters.
                    <p><b>Hereâ€™s an explanation of the dataset fields :-</b>
                    <ul>
                        <li><b>GRE Score:</b> Graduate Record Examination score (ranges from 260 to 340).</li>
                        <li><b>TOEFL Score:</b> Test of English as a Foreign Language score (ranges from 0 to 120).</li>
                        <li><b>University Rating:</b> Rating of the university (typically ranges from 1 to 5).</li>
                        <li><b>SOP (Statement of Purpose):</b> Strength of the SOP (rated on a scale of 1 to 5).</li>
                        <li><b>LOR (Letter of Recommendation):</b> Strength of recommendation letters (rated on a scale
                            of 1 to 5).</li>
                        <li><b>CGPA (Cumulative Grade Point Average):</b> Academic performance on a 10-point scale.</li>
                        <li><b>Research:</b> Whether the applicant has research experience (0 = No, 1 = Yes).</li>
                    </ul>

                    <p><b>What you get as an output?</b>
                        <br>
                    <ul>
                        <li><b>Chance of Admit:</b> Probability of getting admission (ranges from 0 to 100%).</li>
                    </ul>
                    </p>
                    </p>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--Descriptional alert-->
    <div class="container-fluid mx-2">
        <div class="alert alert-primary" role="alert">
            <p>Fill the form below to get the probability of getting admission in the university of your choice.</p>
            <hr>
            <p class="mb-0">Click the button on right side to get description of this website.
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Get Description
                </button>
            </p>
        </div>
    </div>

    <!--Form-->
    <div class="container d-flex justify-content-center align-items-center">
        <div class="form-group">
            <form class="form-control">
                <div class="row">
                    <div class="col-6 border">
                        <label for="gre_score" class="form-label">Select GRE Score(between 260 and 340) : Current Value
                            =><span id="rangeValueGRE">300</span></label><br>
                        <input type="range" name='gre_score' id="gre_score" min="260" max="340" step="1"
                            class="form-range"><br>
                        <label for="toefl_score" class="form-label">Select TOEFL Score(between 0 and 120) : Current
                            Value =><span id="rangeValueTOEFL">60</span></label><br>
                        <input type="range" name='toefl_score' id="toefl_score" min="0" max="120" step="1"
                            class="form-range"><br>
                        <label for="university_rating" class="form-label">Select University Rating</label>
                        <select class="form-select select-menu w-auto" aria-label="Default select example"
                            name="university_rating" id="university_rating">
                            <option selected value="0">Open this select menu</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                        <br>
                    </div>
                    <div class="col-6 border">
                        <label for="sop" class="form-label">Select SOP Score(between 1 and 5) : Current Value =><span
                                id="rangeValueSOP">3.0</span></label>


                        <input type="range" name='sop' id="sop" min="1" max="5" step="0.5" class="form-range">


                        <label for="lor" class="form-label">Select LOR Score(between 1 and 5) : Current Value =><span
                                id="rangeValueLOR">3.0</span></label><br>
                        <input type="range" name='lor' id="lor" min="1" max="5" step="0.5" class="form-range"><br>
                        <label for="cgpa" class="form-label">Select CGPA Score(between 1 and 10) : Current Value =><span
                                id="rangeValueCGPA">5.00</span></label><br>
                        <input type="range" name='cgpa' id="cgpa" min="1" max="10" step="0.01" class="form-range"><br>

                        <span class="me-2">Have you done any research?</span>
                        <br>
                        <input class="form-check-input" type="radio" name="research" id="research" value="1">
                        <label class="form-check-label" for="research">Yes</label>


                        <input class="form-check-input mw-6" type="radio" name="research" id="research" value="0">
                        <label class="" for="research">No</label>

                        <br>
                    </div>
                </div>
                <div class="row">
                    <div class="d-grid col-6">
                        <button type="button" onclick="sendData()" class="btn btn-primary my-2 mx-2">Submit</button>
                    </div>
                    <div class="d-grid col-6">
                        <button type="reset" id="reset" class="btn btn-primary my-2 mx-2">Reset</button>
                    </div>
                </div>
                <div id="show-chances"></div>
        </div>
        </form>
    </div>

    <!--Bootstrap Js-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!--Custom Javascript-->
    <script>

        //Logic for displaying real time values of range inputs
        {
            const rangeInputGRE = document.getElementById("gre_score");
            const rangeValueGRE = document.getElementById("rangeValueGRE");

            rangeInputGRE.addEventListener("input", function () {
                rangeValueGRE.textContent = this.value;
            });

            const rangeInputTOEFL = document.getElementById("toefl_score");
            const rangeValueTOEFL = document.getElementById("rangeValueTOEFL");

            rangeInputTOEFL.addEventListener("input", function () {
                rangeValueTOEFL.textContent = this.value;
            });
            const rangeInputSOP = document.getElementById("sop");
            const rangeValueSOP = document.getElementById("rangeValueSOP");

            rangeInputSOP.addEventListener("input", function () {
                rangeValueSOP.textContent = this.value;
            });
            const rangeInputLOR = document.getElementById("lor");
            const rangeValueLOR = document.getElementById("rangeValueLOR");

            rangeInputLOR.addEventListener("input", function () {
                rangeValueLOR.textContent = this.value;
            });
            const rangeInputCGPA = document.getElementById("cgpa");
            const rangeValueCGPA = document.getElementById("rangeValueCGPA");

            rangeInputCGPA.addEventListener("input", function () {
                rangeValueCGPA.textContent = this.value;
            });
        }

        //Logic for sending data to django server
        function sendData() {
            const GRE = document.getElementById("gre_score").value;
            const TOEFL = document.getElementById("toefl_score").value;
            const UNR = document.getElementById("university_rating").value;
            const SOP = document.getElementById("sop").value;
            const LOR = document.getElementById("lor").value;
            const CGPA = document.getElementById("cgpa").value;
            const Find_Research = () => {
                let ele = document.getElementsByName("research");
                for (let i = 0; i < ele.length; i++) {
                    if (ele[i].checked) {
                        return ele[i].value;
                    }
                }
            }
            const Research = Find_Research()

            if (UNR != "0" && Research != undefined) {
                fetch(`/getData?gre=${GRE}&toefl=${TOEFL}&university_rating=${UNR}&sop=${SOP}&lor=${LOR}&cgpa=${CGPA}&research=${Research}`).then(
                    response => response.json()
                ).then(
                    data => {
                        if (data.status == 1) {
                            if (data.msg < 0) {
                                data.msg = 0;
                            }
                            else if (data.msg > 100) {
                                data.msg = 100;
                            }

                            chances = data.msg.toFixed(2);
                            let show_chances = document.getElementById("show-chances");
                            show_chances.innerHTML = `<div class="alert alert-dark" role="alert">
                            Chances of being admitted in your Desired college is : <b>${chances}%</b> 
                            </div>`;

                        }
                        else {
                            console.log("Error occured");
                        }
                    }


                ).catch(
                    error => console.error("Error occured", error)
                )
            }
            else {
                let show_chances = document.getElementById("show-chances");
                show_chances.innerHTML = `<div class="alert alert-danger" role="alert">
                Please enter the values properly . 
                </div>`;
                console.log("Values are not entered properly")
            }
        }

        //Logic for reset button
        let reset_btn = document.getElementById("reset");
        reset_btn.addEventListener("click", function () {
            let show_chances = document.getElementById("show-chances");
            show_chances.innerHTML = "";
        })  
    </script>
</body>
</html>